[{"apiVersion":"influxdata.com/v2alpha1","kind":"Dashboard","metadata":{"name":"objective-sinoussi-ba5001"},"spec":{"charts":[{"colors":[{"id":"0","name":"pool","type":"min","hex":"#22ADF6"},{"id":"1","name":"ruby","type":"max","hex":"#BF3D5E","value":45}],"decimalPlaces":2,"height":5,"kind":"Gauge","name":"Actual temperature","queries":[{"query":"from(bucket: \"torrevieja\")\n  |> range(start: -10m)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensors\")\n  |> filter(fn: (r) => r[\"_field\"] == \"temperature\")\n  |> mean()\n  |> yield(name: \"mean\")"}],"staticLegend":{},"suffix":"Â°C","width":3},{"colors":[{"id":"0","name":"rainforest","type":"min","hex":"#4ED8A0"},{"id":"1","name":"curacao","type":"max","hex":"#F95F53","value":100}],"decimalPlaces":2,"height":5,"kind":"Gauge","name":"Actual noise","queries":[{"query":"from(bucket: \"torrevieja\")\n  |> range(start: -10m)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensors\")\n  |> filter(fn: (r) => r[\"_field\"] == \"noise\")\n  |> mean()\n  |> yield(name: \"mean\")"}],"staticLegend":{},"suffix":" db","width":3,"yPos":5},{"colors":[{"id":"0","name":"thunder","type":"min","hex":"#FFD255"},{"id":"1","name":"pool","type":"max","hex":"#22ADF6","value":100}],"decimalPlaces":2,"height":5,"kind":"Gauge","name":"Actual humidity","queries":[{"query":"from(bucket: \"torrevieja\")\n  |> range(start: -10m)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensors\")\n  |> filter(fn: (r) => r[\"_field\"] == \"humidity\")\n  |> mean()\n  |> yield(name: \"mean\")"}],"staticLegend":{},"suffix":"%","width":3,"xPos":3},{"axes":[{"base":"10","name":"x","scale":"linear"},{"base":"10","label":"Lagoon depth","name":"y","scale":"linear","suffix":" cm"}],"colorizeRows":true,"colors":[{"id":"kKNWrqJ4j9nw4hI7Xu7H7","name":"Nineteen Eighty Four","type":"scale","hex":"#31C0F6"},{"id":"eX8irQ1iIygyo18d9Cgam","name":"Nineteen Eighty Four","type":"scale","hex":"#A500A5"},{"id":"Hf04ynwLBDfxbtaghPb9b","name":"Nineteen Eighty Four","type":"scale","hex":"#FF7E27"}],"geom":"monotoneX","height":5,"hoverDimension":"auto","kind":"Xy","legendColorizeRows":true,"legendOpacity":1,"legendOrientationThreshold":100000000,"name":"Lagoon depth last 24h","opacity":1,"orientationThreshold":100000000,"position":"overlaid","queries":[{"query":"from(bucket: \"torrevieja\")\n  |> range(start: -24h)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensors\")\n  |> filter(fn: (r) => r[\"_field\"] == \"profundidad\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")"}],"shade":true,"staticLegend":{"colorizeRows":true,"opacity":1,"orientationThreshold":100000000,"widthRatio":1},"width":9,"widthRatio":1,"xCol":"_time","xPos":3,"yCol":"_value","yPos":5},{"colors":[{"id":"base","name":"white","type":"text","hex":"#ffffff"}],"decimalPlaces":0,"height":5,"kind":"Single_Stat","name":"People inside","queries":[{"query":"from(bucket: \"torrevieja\")\n  |> range(start: -5m)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensors\")\n  |> filter(fn: (r) => r[\"_field\"] == \"count_in\" or r[\"_field\"] == \"count_out\")\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({\n      r with actual_visitors: r.count_out - r.count_in\n  }))\n  |> group(columns: [\"_measurement\"])\n  |> reduce(\n      identity: {sum: 0.0},\n      fn: (r, accumulator) => ({ sum: r.actual_visitors + accumulator.sum }),\n    )\n  |> keep(columns: [\"sum\"])"}],"staticLegend":{},"suffix":" people inside","width":6,"xPos":6}],"name":"Torrevieja Monitoring Dashboard"}}]